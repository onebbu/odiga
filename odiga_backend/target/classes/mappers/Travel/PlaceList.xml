<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.odiga.mytrip.travel.dao.PlaceDAO">


    <!-- 여행지 지역별 리스트 가져오기 -->
    <select id="getPlaceList" resultType="com.odiga.mytrip.travel.vo.TravelListVO" parameterType="String">
        SELECT * FROM 
            (SELECT * from travellist WHERE AREACODE = #{areacode} order by ${order} ) 
            WHERE ROWNUM <![CDATA[<= ]]> #{displayCount}
    </select>

    <!-- 여행지별 리뷰 평균 별점 조회 -->
    <select id="getPlaceRate" resultType="java.util.Map" parameterType="String">
        SELECT NVL(ROUND(AVG(REVIEWGRADE)),0) AS "averageRate", count(*) as "cntRating"
        FROM TRAVELREVIEW
        WHERE contentid = #{contentID}
    </select>
</mapper>
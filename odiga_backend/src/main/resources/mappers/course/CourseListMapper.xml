<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.odiga.mytrip.course.dao.CourseDAO">

    <!-- 리뷰 리스트 가져오기 -->
    <select id="getResultList" parameterType="String" resultMap="courseResultMap">
        SELECT 
            r.COURSENO, 
            r.COURSEDAY, 
            r.TRAVELNUM, 
            r.CONTENTID, 
            r.NICKNAME, 
            r.EMAIL, 
            r.STARTDATE, 
            r.ENDDATE, 
            r.COURSEYN,
            t.FIRSTIMAGE,
            t.title,
            t.mapx,
            t.mapy,
            t.addr1
        FROM 
            RESULTLIST r
        JOIN 
            TRAVELLIST t ON r.CONTENTID = t.CONTENTID
        WHERE 
            r.nickname = #{nickname}
    </select>
    <insert id="saveCourseData" parameterType="String">
        INSERT INTO TRAVELCOURSEREVIEW
        (BOARDNO, EMAIL, NICKNAME, BOARDTITLE, BOARDCONTENT, BOARDGRADE, BOARDVIEWCOUNT, BOARDLIKECOUNT, BOARDDATE, BOARDYN)
        VALUES (BOARDNO_SEQ.NEXTVAL, 'odiga@gmail.com' , 'odiga', #{boardTitle}, #{boardContent}, 0, 0 ,0 ,SYSDATE , 'Y')
    </insert>


    <resultMap id="courseResultMap" type="CourseVO">
        <result property="courseno" column="COURSENO"/>
        <result property="courseday" column="COURSEDAY"/>
        <result property="travelnum" column="TRAVELNUM"/>
        <result property="contentid" column="CONTENTID"/>
        <result property="nickname" column="NICKNAME"/>
        <result property="email" column="EMAIL"/>
        <result property="startdate" column="STARTDATE"/>
        <result property="enddate" column="ENDDATE"/>
        <result property="courseyn" column="COURSEYN"/>
        <result property="firstimage" column="FIRSTIMAGE"/>
        <result property="title" column="TITLE"/>
        <result property="mapx" column="MAPX"/>
        <result property="mapy" column="MAPY"/>
    </resultMap>

</mapper>

